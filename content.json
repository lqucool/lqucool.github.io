{"meta":{"title":"Qu's Blog","subtitle":null,"description":"一个看不懂代码的码农","author":"Qu.L","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"Quad Copter","slug":"hello","date":"2017-09-24T14:32:43.911Z","updated":"2017-09-24T15:57:50.480Z","comments":true,"path":"2017/09/24/hello/","link":"","permalink":"http://yoursite.com/2017/09/24/hello/","excerpt":"","text":"this is a test#ifndef __ekf_h #define __ekf_h #include &quot;matrix.h&quot; #include &quot;inverse.h&quot; using namespace matrix; template &lt;int M, int N&gt; class ekf { protected: Matrix&lt;float, M, M&gt; P; Matrix&lt;float, M, M&gt; Q; Matrix&lt;float, N, N&gt; R; Matrix&lt;float, M, M&gt; I; Matrix&lt;float, M, M&gt; F; Matrix&lt;float, N, M&gt; H; Matrix&lt;float, M, 1&gt; X; Matrix&lt;float, N, 1&gt; Z; private: Matrix&lt;float, N, 1&gt; Y; Matrix&lt;float, N, N&gt; S; Matrix&lt;float, N, N&gt; S_inv; Matrix&lt;float, M, N&gt; K; public: void set_P(int m, int n, float value) { P(m, n) = value; } void set_Q(int m, int n, float value) { Q(m, n) = value; } void set_R(int m, int n, float value) { R(m, n) = value; } void set_I(int m, int n, float value) { I(m, n) = value; } void set_F(int m, int n, float value) { F(m, n) = value; } void set_H(int m, int n, float value) { H(m, n) = value; } void set_X(int m, int n, float value) { X(m, n) = value; } void set_Z(int m, int n, float value) { Z(m, n) = value; } void get_X(int m, int n) { return X(m, n); } void predict(); void correct(); }; template &lt;int M, int N&gt; void ekf&lt;M, N&gt;::predict() { X = F * X; P = F * P * F.transpose() + Q; } template &lt;int M, int N&gt; void ekf&lt;M, N&gt;::correct() { Y = Z - H * X; S = H * P * H.transpose() + R; // &amp;S_inv = inverse&lt;n&gt;(&amp;S); K = P * H.transpose() * S_inv; X = X + (K * Y); } #endif","categories":[{"name":"quad copter","slug":"quad-copter","permalink":"http://yoursite.com/categories/quad-copter/"}],"tags":[{"name":"quad","slug":"quad","permalink":"http://yoursite.com/tags/quad/"}]}]}